{% extends 'base-admin.html.twig' %}

{% block title %}Formulaire Question{% endblock %}

{% block body %}
    {% if type == 'add' %}
        <h1>Nouvelle question pour le sondage {{ survey.title }}</h1>
    {% else %}
        <h1>Modification de la question {{ question.title }} <small>pour le sondage {{ survey.title }}</small></h1>
    {% endif %}

    {% if question is defined %}
        {{ form_start(form) }}
        <div class="col-md-11">
            <div class="form-group">
                {{ form_label(form.title, 'Question') }}
                {{ form_widget(form.title, {'attr': {'value': question.title }}) }}
            </div>
            <div class="form-group">
                {{ form_label(form.questionType, 'Type de question') }}
                {% set id = question.questionType.id | trans %}
                {{ form_widget(form.questionType, {value : id }) }}
            </div>
            <div class="form-group" id="choices">
            </div>
            {% if question.questionType.label == 'Simple Choice' or  question.questionType.label == 'Multiple Choice' %}
                <button class="btn btn-violet" type="button" id="btnAddChoice"><img src="{{ asset('img/icon/add.png') }}" class="icon"/>Ajouter un choix</button>
            {% endif %}
            <a href="{{ path('editSurvey', {'id':survey.id}) }}" class="btn btn-info"><img src="{{ asset('img/icon/return.png') }}" class="icon"/>Retour</a>
            <button class="btn btn-success" type="submit"><img src="{{ asset('img/icon/valid.png') }}" class="icon"/>Valider</button>
        </div>
        {{ form_end(form) }}
    {% else %}
        {{ form_start(form) }}
        <div class="col-md-11">
            <div class="form-group">
                {{ form_row(form.title) }}
            </div>
            <div class="form-group">
                {{ form_row(form.questionType) }}
            </div>
            <a href="{{ path('editSurvey', {'id':survey.id}) }}"><button class="btn btn-info" type="button"><img src="{{ asset('img/icon/return.png') }}" class="icon"/>Retour</button></a>
            <button class="btn btn-success" type="submit"><img src="{{ asset('img/icon/valid.png') }}" class="icon"/>Valider</button>
        </div>
        {{ form_end(form) }}
    {% endif %}

    <!-- JQuery -->
    <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

    <script>
        let i = 0;
        $('#btnAddChoice').click(function () {
            if(i == 0){
                $('#choices').append('<h6>Choix</h6>');
            }
            i++;
            $('#choices').append('<div class="row"><div class="col-md-10"><input type="text" id="choice-'+i+'" placeholder="Entrez votre choix nÂ°'+i+'" class="form-control choices"/></div><div class="col-md-1"><a class="btn btn-danger btn-suppr"><img src="{{ asset('img/icon/remove.png') }}" class="icon"></a></div></div>');
        });
    </script>
{% endblock %}